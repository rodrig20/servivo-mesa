<html>
    <head>
        <script type=text/javascript src="{{ url_for('static', filename='jquery.js') }}"> </script>
        <script type=text/javascript src="{{ url_for('static', filename='meu_ajax.js') }}"> </script>
        <script type=text/javascript>$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};</script>
        <meta name="google" content="notranslate">
        <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
        <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
        <style>
            p{
                margin:5px 10px 5px 20px
            }
        
            table {
                width: 100%;
                border-top: 3px solid #d3d3d3
                
            }
        
            td {
                margin:3px;
                display: flex;
                align-items: center;
                height: 50px
            }

            th {
                display: flex;
                align-items: center;
                height: 55px;
                width: 100%;
            }
        
            table, td{
                color: #333;
            }
              
        </style>
        <script>
            //verificar se existe uma posição pra o scrool Y guardada no navegador
            document.addEventListener("DOMContentLoaded", function(event) { 
                var scrollpos = localStorage.getItem('scrollpos');
                if (scrollpos) window.scrollTo(0, scrollpos);
            });

            //assim que a pagina recarregar a posição do scroll Y fica guardado no navegador numa variavel chamada "scrollpos"
            window.onbeforeunload = function(e) {
                localStorage.setItem('scrollpos', window.scrollY);
            };   

        </script>
    </head>
    <body id="corpo"> 
        <div id="main">
            <script>
                l = window.setInterval(function() {
                    verificaReload("{{ pedidos }}","{{ tip }}","pedLoop.html")}, 5000);
            </script>

            {% set metade = (pedidos|length)%}
            {% set linha = [] %}
            {% set part1 = pedidos[::2]%}
            {% set part2 = pedidos[1::2]%}
            {% set pedOrganizados = [part1,part2]%}
            {% set i = 0 %}
            {% for i in range(part2|length) %}
                {{ linha.append((part2[i][2]|length)-(part1[i][2]|length)) or "" }}
            {% endfor %}

            {% if part1|length != part2|length %}
                {{ linha.append(-(part1[i][2]|length)) or "" }}
            {% endif %}

            <h1>Lista de pedidos</h1>
            <style>

            </style>
            <div id="bigdiv">
            {% set c = [1]%}
            {%if (part1|length>0 and part1[0][1]|length > 0) or part2|length>0%}
                {% for part in pedOrganizados%}
                    {%if c[-1] == 1%}
                        <div class="coluna" style="border-right: 2px solid #d3d3d3;">
                        {{c.append(2) or ""}}
                    {% elif c[-1] == 2 %}
                        <div class="coluna" style="border-left: 2px solid #d3d3d3;">
                        {{c.append(3) or ""}}
                    {% endif %}
                    {% for p in range(part|length) %}
                        {% if part[p][1]|length > 0 %}
                            <table id="{{ part[p][-1] }}">
                                <tr>
                                <th id="nome">
                                    <p style="font-size:70px" ><b>&nbsp;&nbsp;&nbsp;&nbsp;{{ part[p][0] }}</b></p>
                                </th>
                                </tr>               
                                {% for i in range(part[p][1]|length) %}
                                    <tr>
                                        <td id="linhaPed">    
                                            <input class="check" type="button" name="{{ part[p][-1] }}" id="avisarPronto" value="&#x2714;" onclick="pedidoPronto({{ part[p][-1] }}, {{ i }}, '{{ tip }}')">
                                            <label style="font-size:40px;">&nbsp;{{ part[p][1][i]}}</label><label style="font-size:40px;color: red;">&nbsp;⇒&nbsp;</label><label style="font-size:40px;">{{ part[p][2][i]}}</label>
                                        </td>
                                    </tr>
                            {% endfor %}
                            {% if linha[p] > 0 and c[-1] == 2%}
                                {% for i in range(linha[p])%}
                                    <tr>
                                        <td id="linhaPed">    
                                        <label style="font-size:40px">&nbsp;</label>
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                            {% if linha[p] < 0 and c[-1] == 3 %}
                                {% for i in range(-linha[p]) %}
                                    <tr>
                                        <td id="linhaPed">    
                                        <label style="font-size:40px">&nbsp;</label>
                                        </td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                            
                            <br></br>
                        {% endif %}
                    {% endfor %}
                    </table>
                </div>
                {% endfor %}
            {% endif %}
            </div>
        <br></br>
    </body>
</html>